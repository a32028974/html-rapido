/* ====== Base ====== */
:root{
  --gap:12px;
  --radius:10px;
  --border:#d7dbe0;
  --muted:#6b7280;
  --text:#111;
  --bg:#fafafa;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  font-family: system-ui, Arial, sans-serif;
  max-width: 960px;
  margin: 0 auto;
  padding: 24px;
  background: var(--bg);
  color: var(--text);
}
.titulo{ text-align:center; margin:0 0 16px; }

.card{
  background:#fff;
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:16px;
}

.row{ display:flex; gap:var(--gap); align-items:center; margin:10px 0; }
.row.end{ justify-content:flex-end; }

.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:var(--gap); }
.grid-3{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:var(--gap); }
.grid-4{ display:grid; grid-template-columns:repeat(4,1fr); gap:var(--gap); }

.field{ display:flex; flex-direction:column; gap:6px; }
.field span{ font-size:.9rem; color:#111; }
.muted{ color: var(--muted); }
.sub{ color: var(--muted); font-size: .9rem; }

input[type="text"], select{
  width:100%;
  padding:8px 10px;
  border:1px solid var(--border);
  border-radius:8px;
  background:#fff;
  outline:none;
  color:var(--text);
}
input[readonly]{ background:#f3f4f6; }
input[type="submit"], button{
  padding:10px 14px;
  border-radius:8px;
  border:1px solid var(--border);
  background:#111827;
  color:#fff;
  cursor:pointer;
}
button{ background:#374151; }
button:hover, input[type="submit"]:hover{ filter:brightness(1.06); }

/* Spinner */
.spinner{ display:none; text-align:center; }
.loader{
  border:4px solid #f3f3f3;
  border-top:4px solid #3498db;
  border-radius:50%;
  width:30px; height:30px;
  animation: spin 1s linear infinite;
  margin:0 auto;
}
@keyframes spin{ 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }

.dni-wrapper{ display:flex; align-items:center; gap:8px; }
.inline-spinner{
  width:18px; height:18px;
  border:2px solid #cfd8dc; border-top:2px solid #3498db;
  border-radius:50%; animation:spin .8s linear infinite;
}

/* Receta */
.receta{ margin-top:14px; }
.receta h3{ margin:10px 0 6px; }
.receta .fila{ display:flex; gap:var(--gap); align-items:center; }
.receta .fila select{ width:120px; }
.receta .fila input[name$="_eje"]{ width:120px; }

/* Totales y acciones */
.totales{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:var(--gap);
  margin:16px 0;
}
.acciones{ display:flex; gap:var(--gap); margin-top:12px; }

/* ====== Área de impresión (ticket) ====== */
.print-area{ display:none; font-family: system-ui, Arial, sans-serif; color:#000; }

/* ====== PRINT A4: panel 140x120 + cupón 50x120 ====== */
@media print{
  body{ background:#fff; color:#000; }
  #formulario, .acciones{ display:none !important; }      /* ocultar UI */
  .print-area{ display:block; }

  /* A4 con márgenes de 10mm -> ancho útil 190mm */
  @page{ size: A4; margin: 10mm; }

  .print-sheet{
    width: 190mm;
    display: flex;
    gap: 0mm;
  }

  .panel{
    border: 1px solid #000;
    height: 120mm;
    padding: 6mm;
    box-sizing: border-box;
  }

  .panel-main{               /* 140mm x 120mm */
    width: 140mm;
  }

  .panel-coupon{             /* 50mm x 120mm */
    width: 50mm;
    border-left: 1px dashed #000;    /* línea de corte */
    position: relative;
  }

  .panel-title{
    font-weight: 700;
    font-size: 14px;
    text-align: center;
    margin: 0 0 4mm 0;
  }

  .logo{
    max-width: 40mm;
    max-height: 14mm;
    object-fit: contain;
    display:block;
    margin: 0 auto 3mm auto;
  }

  .rows{ display:grid; grid-template-columns: 1fr 1fr; gap: 2mm 6mm; font-size: 11px; }
  .row-full{ grid-column: 1 / -1; }

  .print-table{
    width:100%;
    border-collapse: collapse;
    font-size: 11px;
    margin-top: 2mm;
  }
  .print-table td{
    border-bottom: 1px dotted #000;
    padding: 1mm 0;
  }
  .print-footer{
    margin-top: 3mm;
    font-size: 11px;
  }

  .coupon-title{ font-weight:700; font-size:12px; text-align:center; margin-bottom:2mm; }
  .coupon-field{ font-size: 11px; margin-bottom: 1.8mm; }
  .coupon-strong{ font-weight: 700; }

  .qr{
    width: 36mm; height: 36mm; border: 1px solid #000;
    object-fit: contain;
    display:block; margin: 3mm auto 0 auto;
  }

  .cut-hint{
    position:absolute; top:0; left:-0.5mm; bottom:0;
    border-left: 1px dashed #000;
  }
}
